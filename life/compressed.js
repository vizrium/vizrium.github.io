!function(){function t(e){for(var t=[],r=0;r<e;r++)t.push(r);return t}var e=d3.select("#calendar"),r={29:["February"],30:["April","June","September","November"],31:["January","March","May","July","August","October","December"]},n=["January","February","March","April","May","June","July","August","September","October","November","December"],a=new Date;nowDay=a.getDate(),nowMonth=a.getMonth()+1,nowYear=a.getFullYear();var c=100,l=t(101).map(function(e){return e+firstYear}),o={},s=0;for(i=0;i<n.length;i++)for(daysInMonth in curMonth=n[i],r)-1!=r[daysInMonth].indexOf(curMonth)&&(o[curMonth]={},o[curMonth].length=daysInMonth,o[curMonth].daysBefore=s,s+=1*daysInMonth);var d=(a=new Date).getFullYear(),f=a.getMonth(),u=a.getDate();function h(e,t){return[d3.select(e.parentNode.parentNode).data()[0],n.indexOf(d3.select(e.parentNode).data()[0])+1,t+1]}e.selectAll(".monthLabel").data(n).enter().append("text").classed("calText",!0).classed("monthLabel",!0).text(function(e){return e}).attr("transform",function(e,t){return"translate ("+(7+3*o[e].daysBefore+3*t)+", 5)"}),e.selectAll(".year").data(l).enter().append("g").classed("year",!0).attr("transform",function(e,t){return"translate (0,"+(4.8*(t+1)+5)+")"}).selectAll("months").data(n).enter().append("g").classed("months",!0).attr("transform",function(e,t){return"translate ("+(3*o[e].daysBefore+3*t)+",0)"}).selectAll("days").data(function(e){return t(o[e].length)}).enter().append("g").classed("day",!0).classed("future",function(e,t){return circleInfo=h(this,e),circleYear=circleInfo[0],circleMonth=circleInfo[1],circleDay=circleInfo[2],circleYear>=nowYear&&circleMonth>=nowMonth&&circleDay>=nowDay||circleYear>=nowYear&&circleMonth>nowMonth||circleYear>nowYear}).classed("preFirstDay",function(e,t){return circleInfo=h(this,e),circleYear=circleInfo[0],circleMonth=circleInfo[1],circleDay=circleInfo[2],circleYear<=firstYear&&circleMonth<=firstMonth&&circleDay<firstDay||circleYear<=firstYear&&circleMonth<firstMonth||circleYear<firstYear}).classed("postLastDay",function(e,t){return circleInfo=h(this,e),circleYear=circleInfo[0],circleMonth=circleInfo[1],circleDay=circleInfo[2],circleYear>=firstYear+c&&circleMonth>=firstMonth&&circleDay>firstDay||circleYear>=firstYear+c&&circleMonth>firstMonth||circleYear>firstYear+c}).classed("nonLeapYear",function(e,t){return circleInfo=h(this,e),circleYear=circleInfo[0],circleMonth=circleInfo[1],circleDay=circleInfo[2],circleYear%4!=0&&2===circleMonth&&29===circleDay}).attr("transform",function(e,t){return"translate ("+(3*(t+1)+5)+",0)"}).append("circle").attr("fill",function(e,t){return d3.select(this.parentNode.parentNode.parentNode).data()[0]>d?"green":d3.select(this.parentNode.parentNode.parentNode).data()[0]===d&&n.indexOf(d3.select(this.parentNode.parentNode).data()[0])>f?"green":d3.select(this.parentNode.parentNode.parentNode).data()[0]===d&&n.indexOf(d3.select(this.parentNode.parentNode).data()[0])===f&&d3.select(this.parentNode).data()[0]>u?"green":"grey"}).attr("r",function(){return 3/2.6}),d3.selectAll(".year").append("text").classed("calText",!0).text(function(e){return e}).attr("transform","translate (0,"+.33375*parseInt(d3.select(".year .calText").style("font-size"))+")"),d3.selectAll(".day").append("text").classed("calText",!0).text(function(e,t){return e+1}).attr("transform","translate ("+.03*parseInt(d3.select(".day .calText").style("font-size"))*-1+","+.445*parseInt(d3.select(".day .calText").style("font-size"))+")")}();